<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="live2d.parameterEditor.title">Live2D 参数编辑器（捏脸系统）</title>
    <script src="/static/i18n-i18next.js"></script>
    <script src="/static/common_dialogs.js"></script>
    <link rel="stylesheet" href="/static/css/live2d_parameter_editor.css">
    <link rel="stylesheet" href="/static/css/dark-mode.css">
    <script src="/static/theme-manager.js"></script>
</head>

<body>

    <div id="sidebar">
        <div class="control-group">
            <button id="backToMainBtn" class="btn btn-primary" data-i18n-title="live2d.parameterEditor.backToL2DManager">
                <img src="/static/icons/back_to_main_button.png?v=1" data-i18n-alt="live2d.parameterEditor.backToL2DManager" class="back-icon" style="height: 40px; width: auto; max-width: 80px; image-rendering: crisp-edges; margin-right: 10px; flex-shrink: 0; object-fit: contain; display: inline-block;">
                <span class="round-stroke-text" id="back-text" data-i18n="live2d.parameterEditor.backToL2DManager" data-text="返回模型管理">返回模型管理</span>
                <img src="/static/icons/paw_ui.png?v=1" alt="" class="paw-icon" style="height: 70px; width: auto; max-width: 60px; image-rendering: crisp-edges; margin-left: auto; flex-shrink: 0; object-fit: contain; display: inline-block;">
            </button>
        </div>

        <div class="control-group">
            <div id="model-select-wrapper" style="position: relative;">
                <button id="model-select-btn" class="btn btn-primary" type="button" data-i18n-title="live2d.parameterEditor.selectModel">
                    <img src="/static/icons/live2d_model_select_icon.png?v=1" data-i18n-alt="live2d.parameterEditor.selectModel" class="model-select-icon" style="height: 40px; width: auto; max-width: 80px; image-rendering: crisp-edges; margin-right: 10px; flex-shrink: 0; object-fit: contain; display: inline-block;">
                    <span class="round-stroke-text" id="model-select-text" data-i18n="live2d.parameterEditor.selectModel" data-text="选择模型">选择模型</span>
                </button>
                <select id="model-select" class="control-select" style="display: none;">
                    <option data-i18n="live2d.parameterEditor.loading">加载中...</option>
                </select>
                <div id="model-dropdown" class="model-dropdown" style="display: none;">
                    <!-- 下拉菜单项将动态生成 -->
                </div>
            </div>
        </div>

        <div class="control-group">
            <div style="display:flex; gap: 0;">
                <button id="reset-all-btn" class="btn btn-secondary btn-icon" disabled style="width: 135px; flex: 0 0 135px;" data-i18n-title="live2d.parameterEditor.resetAll">
                    <span class="round-stroke-text round-stroke-text-center" id="reset-all-text" data-i18n="live2d.parameterEditor.resetAll" data-text="重置全部">重置全部</span>
                </button>
                <button id="save-btn" class="btn btn-success btn-icon" disabled style="width: 135px; flex: 0 0 135px;" data-i18n-title="live2d.parameterEditor.saveParameters">
                    <span class="round-stroke-text round-stroke-text-center" id="save-text" data-i18n="live2d.parameterEditor.saveParameters" data-text="保存参数">保存参数</span>
                </button>
            </div>
        </div>

        <div class="control-group" style="flex: 1; min-height: 0; display: flex; flex-direction: column;">
            <div id="parameters-list-wrapper" class="parameters-list-wrapper">
                <div class="parameters-list-header">
                    <span class="parameters-list-header-text" data-i18n="live2d.parameterEditor.parameterList" data-text="参数列表">参数列表</span>
                </div>
                <div id="parameters-list" class="parameters-list">
                    <div class="parameters-list-empty" data-i18n="live2d.parameterEditor.pleaseSelectAndLoadModel">
                        请先选择并加载模型
                    </div>
                </div>
            </div>
        </div>

        <div id="status">
            <img src="/static/icons/reminder_icon.png?v=1" alt="提示" class="reminder-icon" style="height: 16px; width: 16px; vertical-align: middle; margin-right: 6px; display: inline-block; image-rendering: crisp-edges;">
            <span id="status-text" data-i18n="live2d.parameterEditor.pleaseSelectModel">选择模型</span>
        </div>
    </div>

    <div id="live2d-container"><canvas id="live2d-canvas"></canvas></div>

    <script src="/static/libs/live2dcubismcore.min.js"></script>
    <script src="/static/libs/live2d.min.js"></script>
    <script src="/static/libs/pixi.min.js"></script>
    <script src="/static/libs/index.min.js"></script>
    <script src="/static/live2d-core.js"></script>
    <script src="/static/live2d-emotion.js"></script>
    <script src="/static/live2d-model.js"></script>
    <script src="/static/live2d-interaction.js"></script>
    <script src="/static/live2d-ui-buttons.js"></script>
    <script src="/static/live2d-ui-popup.js"></script>
    <script src="/static/live2d-ui-hud.js"></script>
    <script src="/static/live2d-ui-drag.js"></script>
    <script src="/static/live2d-init.js"></script>

    <script src="/static/js/live2d_parameter_editor.js"></script>

    <!-- Driver.js 新手引导库 -->
    <script src="/static/libs/driver.min.js"></script>
    <link rel="stylesheet" href="/static/libs/driver.min.css">
    <link rel="stylesheet" href="/static/css/tutorial-styles.css">

    <!-- 通用教程管理器 -->
    <script src="/static/tutorial_voice.js"></script>
    <script src="/static/universal-tutorial-manager.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof initUniversalTutorialManager === 'function') {
                initUniversalTutorialManager();
            }
        });
    </script>
</body>

</html>
